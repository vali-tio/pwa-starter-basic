<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jadwal Pelajaran</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f172a"/>
</head>
<body>
  <h1>ðŸ“š Jadwal Pelajaran</h1>
  <p>Aplikasi Jadwal Pelajaran versi PWA</p>

  <button id="backupBtn">ðŸ“¤ Backup JSON</button>
  <button id="importBtn">ðŸ“¥ Import JSON</button>
  <input type="file" id="importFile" accept=".json,application/json" style="display:none" />

  <script>
    // Data contoh jadwal
    let jadwal = {
      Senin: ["Matematika", "Bahasa Indonesia"],
      Selasa: ["IPA", "IPS"]
    };

    // Backup JSON
    document.getElementById("backupBtn").addEventListener("click", () => {
      const blob = new Blob([JSON.stringify(jadwal, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "jadwal_backup.json";
      a.click();
      URL.revokeObjectURL(url);
    });

    // Import JSON
    document.getElementById("importBtn").addEventListener("click", () => {
      document.getElementById("importFile").click();
    });

    document.getElementById("importFile").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (event) => {
        try {
          jadwal = JSON.parse(event.target.result);
          alert("Import berhasil! Data ada di console.");
          console.log("Data jadwal:", jadwal);
        } catch (err) {
          alert("Gagal membaca file JSON");
        }
      };
      reader.readAsText(file);
    });

    // Register Service Worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js").then(() => {
        console.log("Service Worker terdaftar");
      });
    }
  </script>
</body>
</html>
